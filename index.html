<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiller vs Gold - Historical Market Valuation</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Shiller vs Gold</h1>
            <p class="subtitle">Historical Market Valuations: CAPE Ratio, Home Prices, and Gold</p>
        </header>

        <div class="controls">
            <div class="control-group">
                <label for="chartType">Chart Type:</label>
                <select id="chartType">
                    <option value="cape-gold">CAPE / Gold Ratio</option>
                    <option value="home-gold">Home Price / Gold Ratio</option>
                    <option value="sp500-gold">S&P 500 / Gold Ratio</option>
                    <option value="all-normalized">All Assets (Normalized)</option>
                </select>
            </div>

            <div class="control-group">
                <label for="dateRange">Date Range:</label>
                <select id="dateRange">
                    <option value="all">All Available Data</option>
                    <option value="50">Last 50 Years</option>
                    <option value="100">Last 100 Years</option>
                    <option value="custom">Custom Range</option>
                </select>
            </div>

            <div id="customRange" class="custom-range" style="display: none;">
                <input type="number" id="startYear" placeholder="Start Year" min="1871">
                <input type="number" id="endYear" placeholder="End Year" max="2025">
                <button id="applyRange">Apply</button>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="mainChart"></canvas>
        </div>

        <div class="stats-panel">
            <div class="stat-card">
                <h3>Current CAPE Ratio</h3>
                <p id="currentCAPE">Loading...</p>
            </div>
            <div class="stat-card">
                <h3>Current Gold Price</h3>
                <p id="currentGold">Loading...</p>
            </div>
            <div class="stat-card">
                <h3>CAPE/Gold Ratio</h3>
                <p id="currentRatio">Loading...</p>
            </div>
            <div class="stat-card">
                <h3>Historical Percentile</h3>
                <p id="percentile">Loading...</p>
            </div>
        </div>

        <div class="info-section">
            <h2>About This Chart</h2>
            <p>
                This visualization combines Robert Shiller's CAPE (Cyclically Adjusted Price-to-Earnings) ratio
                and home price data with historical gold prices to show relative valuations over time.
                The CAPE ratio helps identify periods of stock market overvaluation or undervaluation,
                while comparing it to gold provides additional context about real value.
            </p>
            <p>
                <strong>Data Sources:</strong>
            </p>
            <ul>
                <li>Shiller Data: <a href="https://posix4e.github.io/shiller_wrapper_data/" target="_blank">Shiller Wrapper Data</a></li>
                <li>Gold Prices: <a href="https://freegoldapi.com/" target="_blank">FreeGoldAPI</a></li>
            </ul>
        </div>

        <footer>
            <p>Created with data from Robert Shiller's research and FreeGoldAPI</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
