<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiller vs Gold - Historical Market Valuation</title>
    <meta name="description" content="Interactive visualization of CAPE ratio, home prices, S&P 500, and gold prices. Explore historical market valuations around major economic events from 1871 to present.">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" href="preview.png">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Shiller vs Gold - Historical Market Valuation">
    <meta property="og:description" content="Interactive visualization of CAPE ratio, home prices, S&P 500, and gold prices. Explore historical market valuations around major economic events.">
    <meta property="og:image" content="https://posix4e.github.io/shillervsgold/preview.png">
    <meta property="og:url" content="https://posix4e.github.io/shillervsgold/">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Shiller vs Gold - Historical Market Valuation">
    <meta name="twitter:description" content="Interactive visualization of CAPE ratio, home prices, S&P 500, and gold prices since 1871.">
    <meta name="twitter:image" content="https://posix4e.github.io/shillervsgold/preview.png">

    <!-- Stylesheets and Scripts -->
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Shiller vs Gold</h1>
            <p class="subtitle">Historical Market Valuations: CAPE Ratio, Home Prices, and Gold</p>
        </header>

        <div class="controls">
            <div class="control-group">
                <label for="dateRange">Date Range:</label>
                <select id="dateRange">
                    <option value="all">All Available Data</option>
                    <option value="50">Last 50 Years</option>
                    <option value="100">Last 100 Years</option>
                    <option value="event">Historical Event Period</option>
                    <option value="custom">Custom Range</option>
                </select>
            </div>

            <div id="eventRange" class="event-range" style="display: none;">
                <div class="control-group">
                    <label for="eventPeriod">Event Period:</label>
                    <select id="eventPeriod">
                        <option value="1929-crash-10">1929 Crash (¬±10 years)</option>
                        <option value="gold-standard-10">Gold Standard Abandoned (¬±10 years)</option>
                        <option value="oil-crisis-10">1973 Oil Crisis (¬±10 years)</option>
                        <option value="1987-crash-10">1987 Black Monday (¬±10 years)</option>
                        <option value="dotcom-10">Dot-com Bubble (¬±10 years)</option>
                        <option value="housing-crisis-10">2007-2008 Housing Crisis (¬±10 years)</option>
                        <option value="covid-10">COVID-19 Crash (¬±10 years)</option>
                        <option value="gold-to-oil">Gold Standard ‚Üí Oil Crisis (1923-1973)</option>
                        <option value="oil-to-dotcom">Oil Crisis ‚Üí Dot-com (1973-2000)</option>
                        <option value="dotcom-to-housing">Dot-com ‚Üí Housing Crisis (2000-2008)</option>
                        <option value="housing-to-covid">Housing ‚Üí COVID (2008-2020)</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="eventYears">Years Around Event:</label>
                    <select id="eventYears">
                        <option value="5">¬±5 years</option>
                        <option value="10" selected>¬±10 years</option>
                        <option value="20">¬±20 years</option>
                        <option value="30">¬±30 years</option>
                    </select>
                </div>
                <button id="applyEvent">Apply</button>
            </div>

            <div id="customRange" class="custom-range" style="display: none;">
                <input type="number" id="startYear" placeholder="Start Year" min="1871">
                <input type="number" id="endYear" placeholder="End Year" max="2025">
                <button id="applyRange">Apply</button>
            </div>
        </div>

        <div class="calculator-section">
            <h2>Investment Return Calculator</h2>
            <p class="calculator-description">Calculate how much your investment would be worth over the selected date range in Gold, Housing, or the S&P 500 index. Use the date range controls above to select your investment period.</p>

            <div class="calculator-inputs">
                <div class="input-group">
                    <label for="investmentAmount">Investment Amount ($)</label>
                    <input type="number" id="investmentAmount" placeholder="10000" min="0" step="100" value="10000">
                </div>

                <div class="input-group">
                    <label for="assetType">Asset Type</label>
                    <select id="assetType">
                        <option value="gold">Gold</option>
                        <option value="home">Housing (Real Home Price Index)</option>
                        <option value="sp500">S&P 500</option>
                    </select>
                </div>

                <button id="calculateBtn" class="calculate-button">Calculate Return</button>
            </div>

            <div id="calculatorResults" class="calculator-results" style="display: none;">
                <div class="result-card">
                    <h3>Period</h3>
                    <p id="periodDates" style="font-size: 1.2em;">-</p>
                </div>
                <div class="result-card">
                    <h3>Initial Investment</h3>
                    <p id="initialAmount">$0</p>
                </div>
                <div class="result-card">
                    <h3>Final Value</h3>
                    <p id="finalValue">$0</p>
                </div>
                <div class="result-card">
                    <h3>Total Return</h3>
                    <p id="totalReturn">$0</p>
                </div>
                <div class="result-card">
                    <h3>Return Percentage</h3>
                    <p id="returnPercentage">0%</p>
                </div>
                <div class="result-card">
                    <h3>Annualized Return</h3>
                    <p id="annualizedReturn">0%</p>
                </div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <canvas id="chart-home-gold"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="chart-sp500-gold"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="chart-all-normalized"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="chart-cape-usd"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="chart-home-usd"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="chart-sp500-usd"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="chart-gold-usd"></canvas>
            </div>
        </div>

        <div class="stats-panel">
            <div class="stat-card">
                <h3>Current CAPE Ratio</h3>
                <p id="currentCAPE">Loading...</p>
            </div>
            <div class="stat-card">
                <h3>Current Gold Price</h3>
                <p id="currentGold">Loading...</p>
            </div>
            <div class="stat-card">
                <h3>CAPE/Gold Ratio</h3>
                <p id="currentRatio">Loading...</p>
            </div>
            <div class="stat-card">
                <h3>Historical Percentile</h3>
                <p id="percentile">Loading...</p>
            </div>
        </div>

        <div class="info-section">
            <h2>About This Chart</h2>
            <p>
                This visualization combines Robert Shiller's CAPE (Cyclically Adjusted Price-to-Earnings) ratio
                and home price data with historical gold prices to show relative valuations over time.
                The CAPE ratio helps identify periods of stock market overvaluation or undervaluation,
                while comparing it to gold provides additional context about real value.
            </p>
            <p>
                <strong>Data Sources:</strong>
            </p>
            <ul>
                <li>Shiller Data: <a href="https://posix4e.github.io/shiller_wrapper_data/" target="_blank">Shiller Wrapper Data</a></li>
                <li>Gold Prices: <a href="https://freegoldapi.com/" target="_blank">FreeGoldAPI</a></li>
            </ul>
        </div>

        <footer>
            <p>Created with data from Robert Shiller's research and FreeGoldAPI</p>
            <p><a href="https://github.com/posix4e/shillervsgold" target="_blank" style="color: white; text-decoration: none;">‚≠ê View on GitHub</a> | <a href="https://github.com/posix4e/btc-mnav-rainbow" target="_blank" style="color: white; text-decoration: none;">üåà See also: BTC Rainbow Chart</a></p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
